<script setup lang="ts">
import { IconChatClose } from '@tg/icons'
import { useLocale } from '../components/ChatConfigProvider'

defineOptions({
  name: 'ChatEmojiContainer',
})
const props = withDefaults(defineProps<{
  modelValue?: boolean
}>(), {
  modelValue: false,
})
const emit = defineEmits<{
  (e: 'select', emoji: string): void
  (e: 'update:modelValue', value: boolean): void
}>()
const { $$t } = useLocale()
const emojis = [
  // è¡¨æƒ…é¡
  'ğŸ˜€',
  'ğŸ˜ƒ',
  'ğŸ˜„',
  'ğŸ˜',
  'ğŸ˜†',
  'ğŸ˜…',
  'ğŸ¤£',
  'ğŸ˜‚',
  'ğŸ™‚',
  'ğŸ™ƒ',
  'ğŸ˜‰',
  'ğŸ˜Š',
  'ğŸ˜‡',
  'ğŸ¥°',
  'ğŸ˜',
  'ğŸ¤©',
  'ğŸ˜˜',
  'ğŸ˜—',
  'ğŸ˜š',
  'ğŸ˜™',
  'ğŸ˜‹',
  'ğŸ˜›',
  'ğŸ˜œ',
  'ğŸ¤ª',
  'ğŸ˜',
  'ğŸ¤‘',
  'ğŸ¤—',
  'ğŸ¤­',
  'ğŸ¤«',
  'ğŸ¤”',
  'ğŸ¤',
  'ğŸ¤¨',
  'ğŸ˜',
  'ğŸ˜‘',
  'ğŸ˜¶',
  'ğŸ˜',
  'ğŸ˜’',
  'ğŸ™„',
  'ğŸ˜¬',
  'ğŸ¤¥',
  'ğŸ˜Œ',
  'ğŸ˜”',
  'ğŸ˜ª',
  'ğŸ¤¤',
  'ğŸ˜´',
  'ğŸ˜·',
  'ğŸ¤’',
  'ğŸ¤•',
  'ğŸ¤¢',
  'ğŸ¤®',
  'ğŸ¤§',
  'ğŸ¥µ',
  'ğŸ¥¶',
  'ğŸ˜µ',
  'ğŸ¤¯',
  'ğŸ¤ ',
  'ğŸ¥³',
  'ğŸ˜',
  'ğŸ¤“',
  'ğŸ§',
  'ğŸ˜•',
  'ğŸ˜Ÿ',
  'ğŸ™',
  'â˜¹ï¸',
  'ğŸ˜®',
  'ğŸ˜¯',
  'ğŸ˜²',
  'ğŸ˜³',
  'ğŸ¥º',
  'ğŸ˜¦',
  'ğŸ˜§',
  'ğŸ˜¨',
  'ğŸ˜°',
  'ğŸ˜¥',
  'ğŸ˜¢',
  'ğŸ˜­',
  'ğŸ˜±',
  'ğŸ˜–',
  'ğŸ˜£',
  'ğŸ˜',
  'ğŸ˜“',
  'ğŸ˜©',
  'ğŸ˜«',
  'ğŸ¥±',
  'ğŸ˜¤',
  'ğŸ˜¡',
  'ğŸ˜ ',
  'ğŸ¤¬',
  'ğŸ˜ˆ',
  'ğŸ‘¿',
  // æ‰‹å‹¢é¡
  'ğŸ‘‹',
  'ğŸ¤š',
  'ğŸ–ï¸',
  'âœ‹',
  'ğŸ––',
  'ğŸ‘Œ',
  'ğŸ¤',
  'âœŒï¸',
  'ğŸ¤',
  'ğŸ¤Ÿ',
  'ğŸ¤˜',
  'ğŸ¤™',
  'ğŸ‘ˆ',
  'ğŸ‘‰',
  'ğŸ‘†',
  'ğŸ–•',
  'ğŸ‘‡',
  'â˜ï¸',
  'ğŸ‘',
  'ğŸ‘',
  'âœŠ',
  'ğŸ‘Š',
  'ğŸ¤›',
  'ğŸ¤œ',
  'ğŸ‘',
  'ğŸ™Œ',
  'ğŸ‘',
  'ğŸ¤²',
  'ğŸ¤',
  'ğŸ™',
  'âœï¸',
  'ğŸ’ª',
  'ğŸ¦µ',
  'ğŸ¦¶',
  'ğŸ‘‚',
  'ğŸ¦»',
  'ğŸ‘ƒ',
  // æ„›å¿ƒé¡
  'â¤ï¸',
  'ğŸ§¡',
  'ğŸ’›',
  'ğŸ’š',
  'ğŸ’™',
  'ğŸ’œ',
  'ğŸ–¤',
  'ğŸ¤',
  'ğŸ¤',
  'ğŸ’”',
  'â£ï¸',
  'ğŸ’•',
  'ğŸ’',
  'ğŸ’“',
  'ğŸ’—',
  'ğŸ’–',
  'ğŸ’˜',
  'ğŸ’',
  'ğŸ’Ÿ',
  // ç¬¦è™Ÿé¡
  'âœ…',
  'âŒ',
  'âœ”ï¸',
  'ğŸ’¯',
  'ğŸ’¢',
  'ğŸ’¥',
  'ğŸ’«',
  'ğŸ’¦',
  'ğŸ’¨',
  'ğŸ•³ï¸',
  'ğŸ’£',
  'ğŸ’¬',
  'ğŸ’­',
  'ğŸ’¤',
  'ğŸ”¥',
  'â­',
  'ğŸŒŸ',
  'âœ¨',
  'âš¡',
  'â˜„ï¸',
  // è‡ªç„¶é¡
  'â˜€ï¸',
  'ğŸŒ¤ï¸',
  'â›…',
  'ğŸŒ¥ï¸',
  'â˜ï¸',
  'ğŸŒ¦ï¸',
  'ğŸŒ§ï¸',
  'â›ˆï¸',
  'ğŸŒ©ï¸',
  'â˜”',
  'â„ï¸',
  'â˜ƒï¸',
  'â›„',
  'ğŸŒ¬ï¸',
  'ğŸ’§',
  'ğŸŒŠ',
  'ğŸŒ«ï¸',
  'ğŸŒªï¸',
  'ğŸŒˆ',
  'ğŸŒ™',
  'â­',
  'ğŸŒŸ',
  'ğŸŒ',
  'ğŸŒ',
  'ğŸŒ',
  'ğŸª',
  // æ…¶ç¥èˆ‡æ´»å‹•é¡
  'ğŸ‰',
  'ğŸŠ',
  'ğŸˆ',
  'ğŸ',
  'ğŸ€',
  'ğŸ†',
  'ğŸ¥‡',
  'ğŸ¥ˆ',
  'ğŸ¥‰',
  'ğŸ–ï¸',
  'ğŸ…',
  'ğŸ—ï¸',
  'ğŸ«',
  'ğŸŸï¸',
  'ğŸª',
  'ğŸ­',
  'ğŸ¨',
  'ğŸ¬',
  'ğŸ¤',
  'ğŸ§',
  'ğŸ¼',
  'ğŸ¹',
  'ğŸ¥',
  'ğŸ·',
  'ğŸº',
  'ğŸ¸',
  'ğŸª•',
  'ğŸ»',
  'ğŸ²',
  'ğŸ¯',
  'ğŸ³',
  'ğŸ®',
  'ğŸ°',

]

function onSelect(emoji: string) {
  emit('select', emoji)
  close()
}

function close() {
  emit('update:modelValue', false)
}
</script>

<template>
  <Transition name="emoji-slide">
    <div v-if="props.modelValue" class="emoji-panel">
      <header class="emoji-header">
        <span>{{ $$t('è¡¨æƒ…ç¬¦å·') }}</span>
        <IconChatClose class="emoji-close" @click="close" />
      </header>
      <div class="chat-emoji-container">
        <button
          v-for="emoji in emojis"
          :key="emoji"
          type="button"
          class="emoji-item"
          @click="onSelect(emoji)"
        >
          {{ emoji }}
        </button>
      </div>
    </div>
  </Transition>
</template>

<style scoped lang="scss">
.emoji-panel {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 131px;
  width: 100%;
  background: #213743;
  overflow: hidden;
  padding-bottom: env(safe-area-inset-bottom, 12px);
  z-index: 11;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.5);
}

.emoji-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  font-weight: 600;
  font-size: 14px;
  color: #fff;
}

.emoji-close {
  background: transparent;
  border: none;
  color: #fff;
  font-size: 18px;
  cursor: pointer;
}

.chat-emoji-container {
  height: 224px;
  overflow-y: auto;
  display: grid;
  grid-template-columns: repeat(6, minmax(0, 1fr));
  gap: 16px;
  margin: 0 25px;

  &::-webkit-scrollbar {
    width: 5px;
  }

  &::-webkit-scrollbar-thumb {
    background: rgba(217, 217, 217, 0.2);
    border-radius: 999px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }
}

.emoji-item {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border: none;
  border-radius: 6px;
  font-size: 22px;
  background: #213743;
  color: inherit;
  cursor: pointer;
  transition: background 0.15s ease;
  cursor: pointer;
  &:hover {
    background: #d9d9d9;
  }
}

.emoji-slide-enter-active,
.emoji-slide-leave-active {
  transition:
    transform 0.18s ease,
    opacity 0.18s ease;
}

.emoji-slide-enter-from,
.emoji-slide-leave-to {
  opacity: 0;
  transform: translateY(12px);
}
</style>
